{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/NHUNGSITPATH/2025/shubtest/task2/components/transaction-form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useState } from \"react\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { zodResolver } from \"@hookform/resolvers/zod\"\r\nimport * as z from \"zod\"\r\nimport { ArrowLeft, Calendar } from \"lucide-react\"\r\nimport { format } from \"date-fns\"\r\n\r\nconst transactionSchema = z.object({\r\n  datetime: z.string().min(1, \"Thời gian là bắt buộc\"),\r\n  quantity: z\r\n    .number()\r\n    .positive(\"Số lượng phải lớn hơn 0\")\r\n    .refine((val) => val !== undefined && val !== null, { message: \"Số lượng là bắt buộc\" }),\r\n  column: z.string().min(1, \"Trụ là bắt buộc\"),\r\n  revenue: z\r\n    .number()\r\n    .min(0, \"Doanh thu không được âm\")\r\n    .refine((val) => val !== undefined && val !== null, { message: \"Doanh thu là bắt buộc\" }),\r\n  unitPrice: z\r\n    .number()\r\n    .positive(\"Đơn giá phải lớn hơn 0\")\r\n    .refine((val) => val !== undefined && val !== null, { message: \"Đơn giá là bắt buộc\" }),\r\n})\r\n\r\ntype TransactionFormData = z.infer<typeof transactionSchema>\r\n\r\nconst columnOptions = [\r\n  { value: \"tru-1\", label: \"Trụ 1\" },\r\n  { value: \"tru-2\", label: \"Trụ 2\" },\r\n  { value: \"tru-3\", label: \"Trụ 3\" },\r\n  { value: \"tru-4\", label: \"Trụ 4\" },\r\n]\r\n\r\nexport default function TransactionForm() {\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [showDatePicker, setShowDatePicker] = useState(false)\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setValue,\r\n    watch,\r\n    formState: { errors },\r\n  } = useForm<TransactionFormData>({\r\n    resolver: zodResolver(transactionSchema),\r\n    defaultValues: {\r\n      datetime: format(new Date(), \"dd/MM/yyyy HH:mm:ss\"),\r\n      quantity: 3.03,\r\n      column: \"\",\r\n      revenue: 60000,\r\n      unitPrice: 19800,\r\n    },\r\n  })\r\n\r\n  const watchedDatetime = watch(\"datetime\")\r\n\r\n  const onSubmit = async (data: TransactionFormData) => {\r\n    setIsLoading(true)\r\n    try {\r\n      await new Promise((resolve) => setTimeout(resolve, 1000))\r\n      console.log(\"Transaction data:\", data)\r\n      alert(\"Cập nhật giao dịch thành công!\")\r\n    } catch (error) {\r\n      console.error(\"Error:\", error)\r\n      alert(\"Có lỗi xảy ra khi cập nhật!\")\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleDateTimeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value\r\n    if (value) {\r\n      const date = new Date(value)\r\n      const formattedDate = format(date, \"dd/MM/yyyy HH:mm:ss\")\r\n      setValue(\"datetime\", formattedDate)\r\n    }\r\n  }\r\n\r\n  const convertToDateTimeLocal = (dateString: string) => {\r\n    try {\r\n      const [datePart, timePart] = dateString.split(\" \")\r\n      const [day, month, year] = datePart.split(\"/\")\r\n      const [hour, minute, second] = timePart.split(\":\")\r\n      const date = new Date(\r\n        Number.parseInt(year),\r\n        Number.parseInt(month) - 1,\r\n        Number.parseInt(day),\r\n        Number.parseInt(hour),\r\n        Number.parseInt(minute),\r\n        Number.parseInt(second),\r\n      )\r\n      return format(date, \"yyyy-MM-dd'T'HH:mm\")\r\n    } catch {\r\n      return format(new Date(), \"yyyy-MM-dd'T'HH:mm\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"p-6 space-y-6\">\r\n      <div\r\n        className=\"flex items-start justify-between p-2 border-b border-gray-200\"\r\n        style={{\r\n          boxShadow: \"0 4px 6px -4px rgba(0,0,0,0.10)\",\r\n        }}\r\n      >\r\n        <div>\r\n          <button className=\"flex items-center text-[12px] text-gray-600 hover:text-gray-800 mb-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <ArrowLeft className=\"w-5 h-5 mr-2\" />\r\n          <span>Đóng</span>\r\n        </div>\r\n          </button>\r\n          <h1 className=\"text-3xl font-semibold text-gray-900\">Nhập giao dịch</h1>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isLoading}\r\n          className=\"w-1/4 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white text-[12px] py-2 rounded-lg font-medium transition-colors duration-200 cursor-pointer\"\r\n        >\r\n          {isLoading ? \"Đang cập nhật...\" : \"Cập nhật\"}\r\n        </button>\r\n      </div>\r\n        {/* Thời gian */}\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"datetime\" className=\"block text-sm font-medium text-gray-600\">\r\n            Thời gian\r\n          </label>\r\n          <div className=\"relative\">\r\n            <input\r\n              id=\"datetime\"\r\n              value={watchedDatetime}\r\n              readOnly\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10 cursor-pointer\"\r\n              onClick={() => setShowDatePicker(!showDatePicker)}\r\n            />\r\n            <Calendar className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-800\" />\r\n            {showDatePicker && (\r\n              <input\r\n                type=\"datetime-local\"\r\n                value={convertToDateTimeLocal(watchedDatetime)}\r\n                onChange={handleDateTimeChange}\r\n                className=\"absolute top-full left-0 mt-1 w-full p-2 border border-gray-300 rounded-md bg-white z-10\"\r\n                onBlur={() => setShowDatePicker(false)}\r\n                autoFocus\r\n              />\r\n            )}\r\n          </div>\r\n          {errors.datetime && <p className=\"text-sm text-red-600\">{errors.datetime.message}</p>}\r\n        </div>\r\n\r\n        {/* Số lượng */}\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"quantity\" className=\"block text-sm font-medium text-gray-600\">\r\n            Số lượng\r\n          </label>\r\n          <input\r\n            id=\"quantity\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            {...register(\"quantity\", { valueAsNumber: true })}\r\n            className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n              errors.quantity ? \"border-red-500\" : \"border-gray-300\"\r\n            }`}\r\n          />\r\n          {errors.quantity && <p className=\"text-sm text-red-600\">{errors.quantity.message}</p>}\r\n        </div>\r\n\r\n        {/* Trụ */}\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"column\" className=\"block text-sm font-medium text-gray-600\">\r\n            Trụ\r\n          </label>\r\n          <select\r\n            {...register(\"column\")}\r\n            className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n              errors.column ? \"border-red-500\" : \"border-gray-300\"\r\n            }`}\r\n          >\r\n            <option value=\"\">Chọn trụ</option>\r\n            {columnOptions.map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          {errors.column && <p className=\"text-sm text-red-600\">{errors.column.message}</p>}\r\n        </div>\r\n\r\n        {/* Doanh thu */}\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"revenue\" className=\"block text-sm font-medium text-gray-600\">\r\n            Doanh thu\r\n          </label>\r\n          <input\r\n            id=\"revenue\"\r\n            type=\"number\"\r\n            {...register(\"revenue\", { valueAsNumber: true })}\r\n            className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n              errors.revenue ? \"border-red-500\" : \"border-gray-300\"\r\n            }`}\r\n          />\r\n          {errors.revenue && <p className=\"text-sm text-red-600\">{errors.revenue.message}</p>}\r\n        </div>\r\n\r\n        {/* Đơn giá */}\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"unitPrice\" className=\"block text-sm font-medium text-gray-600\">\r\n            Đơn giá\r\n          </label>\r\n          <input\r\n            id=\"unitPrice\"\r\n            type=\"number\"\r\n            {...register(\"unitPrice\", { valueAsNumber: true })}\r\n            className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n              errors.unitPrice ? \"border-red-500\" : \"border-gray-300\"\r\n            }`}\r\n          />\r\n          {errors.unitPrice && <p className=\"text-sm text-red-600\">{errors.unitPrice.message}</p>}\r\n        </div>\r\n        </form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}